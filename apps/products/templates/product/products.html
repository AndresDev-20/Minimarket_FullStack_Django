{% extends 'dashboard.html' %} 

{% block dashboard_content %}
<div class="Products">
  <div class="Products__header">
    <h1>Products</h1>
    <div class="Products__actions">
      <a class="Button__add" href="{% url 'product_create' %}"
        >Nuevo Producto</a
      >
      <a class="Button__view" href="{% url 'category' %}">Ver Categorias</a>
    </div>
  </div>

  <div>
    <h3>Filtrar por categoria</h3>
    <form method="GET" action="{% url 'product_filter' %}">
      <select name="category">
        <option value="">Todas las categorias</option>
        {% for category in list_categories %}
        <option value="{{ category.id }}">{{ category.name }}</option>
        {% endfor %}
      </select>
      <button type="submit" class="Button__filter">Filtrar</button>
    </form>
  </div>

  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Price</th>
        <th>Stock</th>
        <th>Is Active</th>
        <th>Category</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for product in list_products %}
      <tr>
        <td>{{ product.id }}</td>
        <td>{{ product.name }}</td>
        <td>{{ product.sale_price }}</td>
        <td>{{ product.stock }}</td>
        <td>{{ product.is_active }}</td>
        <td>{{ product.category }}</td>
        <td class="Buttons__actions">
          <a class="Button__edit" href="{% url 'product_edit' product.id %}"
            >Editar</a
          >
          <form
            action="{% url 'product_delete' product.id %}"
            method="post"
            class="Button__delete-form">
            {% csrf_token %}
            <button type="submit" class="Button__delete">Eliminar</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{% endblock %}
